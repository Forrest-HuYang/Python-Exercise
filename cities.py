#%% Setup
import numpy as np
from mpl_toolkits.basemap import Basemap
from matplotlib.patches import Polygon
from matplotlib.colors import rgb2hex
import matplotlib.pyplot as plt
import pandas as pd
import json
import requests

target = ['七台河市', '三亚市', '三明市', '三门峡市', '上海|上海', '上饶市', '东莞市', '东营市', '中卫市', '中山市', '临夏回族自治州', '临汾市', '临沂市', '临沧市', '丹东市', '丽水市', '丽江市', '乌兰察布市', '乌海市', '乌鲁木齐市', '乐山市', '九江市', '云浮市', , '克孜勒苏柯尔克孜自治州', '克拉玛依市', '六安市', '六盘水市', '兰州市', '兴安盟', '内江市', '凉山彝族自治州', '包头市', '北京|北京', '北海市', '十堰市', '南京市', '南充市', '南宁市', '南平市', '南昌市', '南通市', '南阳市', '博尔塔拉蒙古自治州', '厦门市', '双鸭山市', '台州市', '合肥市', '吉安市', '吉林市',                                                                     '吐鲁番地区', '吕梁市', '吴忠市', '周口市', '呼伦贝尔市', '呼和浩特市', '和田地区', '咸宁市', '咸阳市', '哈密地区', '哈尔滨市', '唐山市', '商丘市', '商洛市', '喀什地区', '嘉兴市                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       '固原市', '塔城地区', '大兴安岭地区', '大同市', '大庆市', '大理白族                                                                      ', '天津|天津', '天门市', '太原市', '威海市', '娄底市|婁底市', '孝感市', '宁德市', '宁波市', '安庆市', '安康市', '安阳市', '安顺市',                                                             '定西市', '宜宾市', '宜昌市', '宜春市',                                                        '宝鸡市', '宣城市', '宿州市', '宿迁市', '山南地区', '岳阳市|岳陽市', '崇左市', '巢湖市', '巴中市',                             '巴彦淖尔市', '巴音郭愣蒙古自治州', '常州市', '常德市|常德市',                               '平凉市', '平顶山市', '广元市', '广安市', '广州市', '庆阳市', '廊坊市', '延安市', '延边朝鲜族自治州', '开封市', '张家口市',                                '张家界市|張家界市', '张掖市', '徐州市',                                '德宏傣族景颇族自治州', '德州市', '德阳市', '忻州市', '怀化市|懷化市', '怒江傈僳族自治州', '恩施土家族苗族自治州',                  '惠州市', '成都市', '扬州市', '承德市', '抚州市', '抚顺市', '拉萨市',                                   '揭阳市', '攀枝花市', '文山壮族苗族自治州', '新乡市', '新余市',                                                                                             '无锡市', '日喀则地区', '日照市', '昆明市', '昌吉回族自治州', '昌都地区',                                        '昭通市', '晋中市', '晋城市', '普洱市', '景德镇市', '曲靖市', '朔州市', '朝阳市', '本溪市', '来宾市',          '杭州市', '松原市', '林芝地区', '果洛藏族自治州',                               '枣庄市', '柳州市', '株洲市|株洲市', '桂林市', '梅州市', '梧州市',                  '楚雄彝族自治州', '榆林市', '武威市', '武汉市',             '毕节地区', '永州市|永州市', '汉中市', '汕头市', '汕尾市',                                                    '江门市', '池州市', '沈阳市', '沧州市',                               '河池市', '河源市', '泉州市', '泰安市',                             '泰州市', '泸州市', '洛阳市', '济南市', '济宁市', '济源市', '海东地区', '海北藏族自治州', '海南', '海南藏族自治州', '海口市', '海西蒙古族藏族自治州', '淄博市',                                                                       '淮北市', '淮南市', '淮安市', '深圳市',                                        '清远市', '温州市', '渭南市', '湖州市', '湘潭市|湘潭市',                                                       '湘西土家族苗族自治州|湘西土家族苗族自治州', '湛江市', '滁州市', '滨州', '漯河市', '漳州市', '潍坊市', '潜江市', '潮州市', '濮阳市',            '烟台市', '焦作市', '牡丹江市',             '玉林市', '玉树藏族自治州',                         '玉溪市', '珠海市', '甘南藏族自治州',                       '甘孜藏族自治州', '白城市', '白山市', '白银市',                  '百色市', '益阳市|益陽市', '盐城市', '盘锦市',                              '眉山市', '石嘴山市', '石家庄市', '石河子市', '神农架林区', '福州市', '秦皇岛市', '红河哈尼族彝族自治州', '绍兴市',                                             '绥化市', '绵阳市', '聊城市',                                  '肇庆市', '自贡市', '舟山市', '芜湖市', '苏州市', '茂名市', '荆州市', '荆门市',                                                             '莆田市', '莱芜市', '菏泽市', '萍乡市', '葫芦岛市', '蚌埠市', '衡水市',                 '衡阳市|衡陽市', '衢州市', '襄樊市', '西双版纳傣族自治州', '西宁市', '西安市',                               '许昌市', '贵港市', '贵阳市',               '贺州市', '资阳市', '赣州市', '赤峰市', '辽源市', '辽阳市',                                                             '达州市', '运城县', '连云港市', '迪庆藏族自治州',                                              '通化市', '通辽市', '遂宁市', '遵义市', '邢台市', '那曲地区',               '邯郸市',           '邵阳市|邵陽市', '郑州市', '郴州市|郴州市', '鄂尔多斯市', '鄂州市', '酒泉市', '重慶|重庆',                              '金华市', '金昌市', '钦州市', '铁岭市', '铜仁地区', '铜川市', '铜陵市',                                                     '银川市', '锡林郭勒盟', '锦州市', '镇江市', '长春市', '长沙市|長沙市', '长治市',                                                            '阜新市', '阜阳市', '防城港市', '阳江市',                       '阳泉市', '阿克苏地区', '阿勒泰地区',                       '阿坝藏族羌族自治州', '阿拉善盟', '阿里地区', '陇南市',         '随州市', '雅安市', '青岛市', '鞍山市', '韶关市', '马鞍山市', '驻马店市', '鸡西市', '鹤壁市', '鹤岗市', '鹰潭市',                                                                   '黄冈市', '黄南藏族自治州', '黄山市', '黄石市', '黑河市', '黔东南苗族侗族自治州', '黔南布依族苗族自治州', '黔西南布依族苗族自治州', '齐齐哈尔市', '龙岩市']
raw = ['七台河', '万宁', '三亚', '三明', '三门峡', '上海', '上饶', '东方', '东莞', '中卫', '中山', '临夏', '临汾', '临沂', '临沧', '临高县', '丹东', '丽水', '丽江市', '乌兰察布', '乌海', '乌鲁木齐', '乐东', '乐山', '九江', '亳州', '仙桃', '伊犁州', '佛山', '佳木斯', '保定', '保山市', '信阳',  '公主岭', '六安', '六盘水', '兰州', '兴安盟乌兰浩特', '兵团第九师', '内江', '凉山', '包头', '北京', '北海', '十堰', '南京', '南充', '南宁', '南平', '南昌', '南通', '南阳', '厦门', '双鸭山', '台州', '合肥', '吉安', '吉林',                                                                                                                 '吐鲁番', '吕梁', '吴忠', '周口', '呼伦贝尔', '呼和浩特', '咸宁',                      '咸阳', '哈尔滨',                 '唐山', '商丘', '商洛',                '嘉兴',              '四平',                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        兴安岭', '大同', '大庆', '大理', '大连', '天水', '天津', '天门',                                                                          原', '威海', '娄底', '孝感', '宁东管委会', '宁德', '宁波', '安庆', '安康', '安阳', '安顺', '定安县',                                                               '定西', '宜宾', '宜昌', '宜春',                                                                '宝鸡', '宣城', '宿州', '宿迁',                  '岳阳', '巴中',                                                        '巴彦淖尔', '常州',                                                          '常德', '平凉', '平顶山', '广元', '广安',          '广州',              '廊坊', '延安', '延边', '开封', '张家口',                                                       '张家界', '张掖', '徐州',                              '德宏州', '德州',                    '德阳', '忻州', '怀化', '恩施州',                                                              '惠州', '成都', '扬州', '承德', '抚州',                                                         '揭阳', '攀枝花',                       '新乡', '新余',                                                                                                '无锡',                      '日照', '昆明', '昌江县', '昭通市', '晋中',                                                          '晋城', '普洱', '景德镇', '曲靖', '朔州',                              '朝阳市', '本溪', '杭州', '                                 松原',                          '枣庄', '柳州', '株洲',             '桂林', '梅州', '梧州',                                         '榆林', '武汉',                     '毕节',         '永城', '永州', '汉中', '汕头', '汕尾',                                                 '江门', '池州', '沈阳', '沧州',                                     '河池', '河源', '泉州', '泰安',                                          '泰州', '泸州', '洛阳', '济南', '济宁',                                                                '海口',                          '淄博', '                                                              淮北', '淮南', '淮安', '深圳',                                                          '清远', '温州', '渭南', '湖州',                                                                       '湘潭', '湘西自治州', '湛江', '滁州', '滑县', '滨州', '漯河', '漳州',                     '潍坊', '潜江', '潮州', '澄迈县', '澳门', '濮阳', '烟台', '焦作', '牡丹江',                     '玉林',                                         '玉溪', '珠海', '琼中县', '琼海', '甘南州',                     '甘孜', '白银',                                         '百色', '益阳', '盐城', '盘锦',                                         '眉山', '石家庄', '神农架', '福州', '秦皇岛',           '第七师', '第八师石河子', '红河', '绍兴',                                                               '绥化', '绵阳', '聊城',                                             '肇庆', '自贡', '舟山', '芜湖', '苏州', '茂名', '荆州', '荆门',                                                                  '莆田', '菏泽', '萍乡',                                        '营口', '葫芦岛', '蚌埠',               '衡水', '衡阳', '衢州', '襄阳', '西双版纳州', '西宁',                           '西安', '许昌', '贵港', '贵阳',                      '贺州', '资阳', '赣州', '赤峰', '辽阳',                                                                              '达州', '运城', '连云港',                                                                  '通化', '通辽', '遂宁', '遵义', '邓州', '邢台',                        '邯郸', '       邵阳', '郑州', '郴州',                       '鄂尔多斯', '鄂州',                        '重庆',                         '金华', '金昌', '钦州', '铁岭', '铜仁',         '铜川', '铜陵',                                                          '银川', '锡林郭勒', '锦州', '镇江', '长垣', '长春', '长沙', '长治', '阜新',                                                                '阜阳', '防城港', '阳江',                                   '阳泉', '阿克苏',                                            '阿坝州',                              '陇南', '陵水县', '随州', '雅安', '青岛', '鞍山', '韩城', '韶关', '香港', '马鞍山', '驻马店', '鸡西', '鹤壁', '鹤岗', '鹰潭',                                                                        '黄冈', '黄山', '黄石', '黑河', '黔东南州', '黔南州', '黔西南州', '齐齐哈尔', '龙岩']

convert_cities = {'七台河市':'七台河', '三亚市':'三亚', '三明市':'三明', '三门峡市':'三门峡', '上海|上海':'上海', '上饶市':'上饶', '东莞市':'东莞', '东营市':0, '中卫市':'中卫', '中山市':'中山', '临夏回族自治州':'临夏', '临汾市':'临汾', '临沂市':'临沂', '临沧市':'临沧', '丹东市':'丹东', '丽水市':'丽水', '丽江市':'丽江', '乌兰察布市':'乌兰察布', '乌海市':'乌海', '乌鲁木齐市':'乌鲁木齐', '乐山市':'乐山', '九江市':'九江', '云浮市':0, '亳州市':'豪州', '仙桃市':'仙桃', '伊春市':0, '伊犁哈萨克自治州':'伊犁州', '佛山市':'佛山', '佳木斯市':'佳木斯', '保定市':'保定', '保山市':'保山市', '信阳市':'信阳', '克孜勒苏柯尔克孜自治州':0, '克拉玛依市':'第七师', '六安市':'六安', '六盘水市':'六盘水', '兰州市':'兰州', '兴安盟':'兴安盟乌兰浩特', '内江市':'内江', '凉山彝族自治州':'凉山', '包头市':'包头', '北京|北京':'北京', '北海市':'北海', '十堰市':'十堰', '南京市':'南京', '南充市':'南充', '南宁市':'南宁', '南平市':'南平', '南昌市':'南昌', '南通市':'南通', '南阳市':'南阳', '博尔塔拉蒙古自治州':0, '厦门市':'厦门', '双鸭山市':'双鸭山', '台州市':'台州', '合肥市':'合肥', '吉安市':'吉安', '吉林市':'吉林', '吐鲁番地区':'吐鲁番', '吕梁市':'吕梁', '吴忠市':'吴忠', '周口市':'周口', '呼伦贝尔市':'呼伦贝尔', '呼和浩特市':'呼和浩特', '和田地区':0, '咸宁市':'咸宁', '咸阳市':'咸阳', '哈密地区':0, '哈尔滨市':'哈尔滨市', '唐山市':'唐山', '商丘市':'商丘', '商洛市':'商洛', '喀什地区':0, '嘉兴市':'嘉兴', '嘉峪关市':0, '四平市':'四平', '固原市':'固原', '塔城地区':'兵团第九师', '大兴安岭地区':'大兴安岭', '大同市':'大同', '大庆市':'大庆', '大理白族自治州':'大理', '大连市':'大连', '天水市':'天水', '天津|天津':'天津', '天门市':'天门', '太原市':'太原', '威海市':'威海', '娄底市|婁底市':'娄底', '孝感市':'孝感', '宁德市':'宁德', '宁波市':'宁波', '安庆市':'安庆', '安康市':'安康', '安阳市':'安阳', '安顺市':'安顺', '定西市':'定西', '宜宾市':'宜宾', '宜昌市':'宜昌', '宜春市':'宜春', '宝鸡市':'宝鸡', '宣城市':'宣称', '宿州市':'宿州', '宿迁市':'宿迁', '山南地区':0, '岳阳市|岳陽市':'岳阳', '崇左市':0, '巢湖市':0, '巴中市':'巴中', '巴彦淖尔市':'巴彦卓尔', '巴音郭愣蒙古自治州':0, '常州市':'常州', '常德市|常德市':'常德', '平凉市':'平凉', '平顶山市':'平顶山', '广元市':'广元', '广安市':'广安', '广州市':'广州', '庆阳市':0, '廊坊市':'廊坊', '延安市':'延安', '延边朝鲜族自治州':'延边', '开封市':'开封', '张家口市':'张家口', '张家界市|張家界市':'张家界', '张掖市':'张掖', '徐州市':'徐州', '德宏傣族景颇族自治州':'德宏', '德州市':'德州', '德阳市':'德阳', '忻州市':'忻州', '怀化市|懷化市':'怀化', '怒江傈僳族自治州':0, '恩施土家族苗族自治州':'恩施州', '惠州市':'惠州', '成都市':'成都', '扬州市':'扬州', '承德市':'承德', '抚州市':'抚州', '抚顺市':0, '拉萨市':0, '揭阳市':'揭阳', '攀枝花市':'攀枝花', '文山壮族苗族自治州':0, '新乡市':'新乡', '新余市':'新余', '无锡市':'无锡', '日喀则地区':0, '日照市':'日照', '昆明市':'昆明', '昌吉回族自治州':0, '昌都地区':0, '昭通市':'昭通', '晋中市':'晋中', '晋城市':'晋城', '普洱市':'普洱', '景德镇市':'景德镇', '曲靖市':'曲靖', '朔州市':'朔州', '朝阳市':'朝阳', '本溪市':'本溪', '来宾市':0, '杭州市':'杭州', '松原市':'松原', '林芝地区':0, '果洛藏族自治州':0, '枣庄市':'枣庄', '柳州市':'柳州', '株洲市|株洲市':'株洲', '桂林市':'桂林', '梅州市':'梅州', '梧州市':'梧州', '楚雄彝族自治州', '榆林市':'榆林', '武威市':0, '武汉市':'武汉', '毕节地区':'毕节', '永州市|永州市':'永州', '汉中市':'汉中', '汕头市':'汕头', '汕尾市':'汕尾', '江门市':'江门', '池州市':'池州', '沈阳市':'沈阳', '沧州市':''沧州, '河池市':'河池', '河源市':'河源', '泉州市':'泉州', '泰安市':'泰安', '泰州市':'泰州', '泸州市':'泸州', '洛阳市':'洛阳', '济南市':'济南', '济宁市':'济宁', '济源市':0, '海东地区':0 , '海北藏族自治州':0, '海南':0, '海南藏族自治州':0, '海口市':'海口', '海西蒙古族藏族自治州':0, '淄博市':'淄博', '淮北市':'淮北', '淮南市':'淮南', '淮安市':'淮安', '深圳市':'深圳', '清远市':'清远', '温州市':'温州', '渭南市':'渭南', '湖州市':'湖州', '湘潭市|湘潭市':'湘潭', '湘西土家族苗族自治州|湘西土家族苗族自治州':'湘西自治州', '湛江市':'湛江', '滁州市':'滁州', '滨州':'滨州', '漯河市':'漯河', '漳州市':'漳州', '潍坊市':'潍坊', '潜江市':'潜江', '潮州市':'潮州', '濮阳市':'濮阳', '烟台市':'烟台', '焦作市':'焦作', '牡丹江市':'牡丹江', '玉林市':'玉林', '玉树藏族自治州':0, '玉溪市':'玉溪', '珠海市':'珠海', '甘南藏族自治州':'甘南州', '甘孜藏族自治州':'甘孜', '白城市':0, '白山市':0, '白银市':'白银', '百色市':'百色', '益阳市|益陽市':'益阳', '盐城市':'盐城', '盘锦市':'盘锦', '眉山市':'眉山', '石嘴山市':0, '石家庄市':'石家庄', '石河子市':'第八师石河子', '神农架林区':'神农架', '福州市':'福州', '秦皇岛市':'秦皇岛', '红河哈尼族彝族自治州':'红河', '绍兴市':'绍兴', '绥化市':'绥化', '绵阳市':'绵阳', '聊城市':'聊城', '肇庆市':'肇庆', '自贡市':'自贡', '舟山市':'舟山', '芜湖市':'芜湖', '苏州市':'苏州', '茂名市':'茂名', '荆州市':'荆州', '荆门市':'荆门', '莆田市':'莆田', '莱芜市':0, '菏泽市':'菏泽', '萍乡市':'萍乡', '葫芦岛市':'葫芦岛', '蚌埠市':'蚌埠', '衡水市':'衡水', '衡阳市|衡陽市':'衡阳', '衢州市':'衢州', '襄樊市':'襄阳', '西双版纳傣族自治州':'西双版纳州', '西宁市':'西宁', '西安市':'西安', '许昌市':'许昌', '贵港市':'贵港', '贵阳市':'贵阳', '贺州市':'贺州', '资阳市':'资阳', '赣州市':'赣州', '赤峰市':'赤峰', '辽源市':0, '辽阳市':'辽阳', '达州市':'达州', '运城县':'运城', '连云港市':'连云港', '迪庆藏族自治州':0, '通化市':'通化', '通辽市':'通辽', '遂宁市':'遂宁', '遵义市':'遵义', '邢台市':'邢台', '那曲地区':0, '邯郸市':'邯郸', '邵阳市|邵陽市':'昭阳', '郑州市':'郑州', '郴州市|郴州市', '鄂尔多斯市':'鄂尔多斯', '鄂州市':'鄂州', '酒泉市':0, '重慶|重庆':'重庆', '金华市':'金华', '金昌市':'金昌', '钦州市':'钦州', '铁岭市':'铁岭', '铜仁地区':'铜仁', '铜川市':'铜川', '铜陵市':'铜陵', '银川市':'银川', '锡林郭勒盟':'锡林郭勒', '锦州市':'锦州', '镇江市':'镇江', '长春市':'长春', '长沙市|長沙市':'长沙', '长治市':'长治', '阜新市':'阜新', '阜阳市':'阜阳', '防城港市':'防城港', '阳江市':'阳江', '阳泉市':'阳泉', '阿克苏地区':'阿克苏', '阿勒泰地区':0, '阿坝藏族羌族自治州':'阿坝州', '阿拉善盟':0, '阿里地区':0, '陇南市':'陇南', '随州市':'随州', '雅安市':'雅安', '青岛市':'青岛', '鞍山市':'鞍山', '韶关市':'韶关', '马鞍山市':'马鞍山', '驻马店市':'驻马店', '鸡西市':'鸡西', '鹤壁市':'鹤壁', '鹤岗市':'鹤岗', '鹰潭市':'鹰潭', '黄冈市':'黄冈', '黄南藏族自治州':0, '黄山市':'黄山', '黄石市':'黄石', '黑河市':'黑河', '黔东南苗族侗族自治州':'黔东南州', '黔南布依族苗族自治州':'黔南州', '黔西南布依族苗族自治州':'黔西南州', '齐齐哈尔市':'齐齐哈尔', '龙岩市':'龙岩'}
万宁
东方
临高乐东
儋州
公主岭
第九师
:''

plt.figure(figsize=(16,8))
m = Basemap(
    llcrnrlon=77,
    llcrnrlat=14,
    urcrnrlon=140,
    urcrnrlat=51,
    projection='lcc',
    lat_1=33,
    lat_2=45,
    lon_0=100
)



m.readshapefile('/Users/tony/MyWork/Python-Exercise/gadm36_CHN_shp/gadm36_CHN_2', 'states', drawbounds=True)

citynames = set()
for shapedict in m.states_info:
    cityname = shapedict['NL_NAME_2']
    
    citynames.add(cityname)

citynames = list(citynames)
citynames.sort()
 
print(citynames)





